(this.webpackJsonpwebsite=this.webpackJsonpwebsite||[]).push([[0],{137:function(t,e,n){},140:function(t){t.exports=JSON.parse('[{"country":"United Arab Emirates","dbname":"arwiki","group":"ar","iso3":"ARE","name":"Arabic","population_size":9770529},{"country":"Saudi Arabia","dbname":"arwiki","group":"ar","iso3":"SAU","name":"Arabic","population_size":34268528},{"country":"United Arab Emirates","dbname":"arywiki","group":"ar","iso3":"ARE","name":"Moroccan Arabic","population_size":9770529},{"country":"Saudi Arabia","dbname":"arywiki","group":"ar","iso3":"SAU","name":"Moroccan Arabic","population_size":34268528},{"country":"United Arab Emirates","dbname":"arzwiki","group":"ar","iso3":"ARE","name":"Egyptian Arabic","population_size":9770529},{"country":"Saudi Arabia","dbname":"arzwiki","group":"ar","iso3":"SAU","name":"Egyptian Arabic","population_size":34268528},{"country":"Azerbaijan","dbname":"azwiki","group":"az","iso3":"AZE","name":"Azerbaijani","population_size":10047718},{"country":"Azerbaijan","dbname":"azbwiki","group":"az","iso3":"AZE","name":"South Azerbaijani","population_size":10047718},{"country":"Bulgaria","dbname":"bgwiki","group":"bg","iso3":"BGR","name":"Bulgarian","population_size":7000119},{"country":"Bosnia and Herzegovina","dbname":"bswiki","group":"bs","iso3":"BIH","name":"Bosnian","population_size":3301000},{"country":"Czech Republic","dbname":"cswiki","group":"cs","iso3":"CZE","name":"Czech","population_size":10689209},{"country":"Denmark","dbname":"dawiki","group":"da","iso3":"DNK","name":"Danish","population_size":5771876},{"country":"Germany","dbname":"dewiki","group":"de","iso3":"DEU","name":"German","population_size":83517048},{"country":"Austria","dbname":"dewiki","group":"de","iso3":"AUT","name":"German","population_size":8955102},{"country":"Greece","dbname":"elwiki","group":"el","iso3":"GRC","name":"Greek","population_size":10473455},{"country":"Cyprus","dbname":"elwiki","group":"el","iso3":"CYP","name":"Greek","population_size":1198575},{"country":"United States","dbname":"enwiki","group":"en","iso3":"USA","name":"English","population_size":329064896},{"country":"United Kingdom","dbname":"enwiki","group":"en","iso3":"GBR","name":"English","population_size":67530168},{"country":"Spain","dbname":"eswiki","group":"es","iso3":"ESP","name":"Spanish","population_size":46736776},{"country":"Estonia","dbname":"etwiki","group":"et","iso3":"EST","name":"Estonian","population_size":1325648},{"country":"Finland","dbname":"fiwiki","group":"fi","iso3":"FIN","name":"Finnish","population_size":5532156},{"country":"France","dbname":"frwiki","group":"fr","iso3":"FRA","name":"French","population_size":65129728},{"country":"Ireland","dbname":"gawiki","group":"ga","iso3":"IRL","name":"Irish","population_size":4882495},{"country":"India","dbname":"hiwiki","group":"hi","iso3":"IND","name":"Hindi","population_size":1366417792},{"country":"Nepal","dbname":"hiwiki","group":"hi","iso3":"NPL","name":"Hindi","population_size":28608710},{"country":"Israel","dbname":"hewiki","group":"he","iso3":"ISR","name":"Hebrew","population_size":8519377},{"country":"Hungary","dbname":"huwiki","group":"hu","iso3":"HUN","name":"Hungarian","population_size":9684679},{"country":"Indonesia","dbname":"idwiki","group":"id","iso3":"IDN","name":"Indonesian","population_size":270625568},{"country":"Iceland","dbname":"iswiki","group":"is","iso3":"ISL","name":"Icelandic","population_size":339031},{"country":"Italy","dbname":"itwiki","group":"it","iso3":"ITA","name":"Italian","population_size":60550076},{"country":"Japan","dbname":"jawiki","group":"ja","iso3":"JPN","name":"Japanese","population_size":126860304},{"country":"South Korea","dbname":"kowiki","group":"ko","iso3":"KOR","name":"Korean","population_size":51225308},{"country":"Iran","dbname":"kuwiki","group":"ku","iso3":"IRN","name":"Kurdish","population_size":82913904},{"country":"Luxembourg","dbname":"lbwiki","group":"lb","iso3":"LUX","name":"Luxembourgish","population_size":615729},{"country":"Lithuania","dbname":"ltwiki","group":"lt","iso3":"LTU","name":"Lithuanian","population_size":2759627},{"country":"Netherlands","dbname":"nlwiki","group":"nl","iso3":"NLD","name":"Dutch","population_size":17097130},{"country":"Norway","dbname":"nowiki","group":"no","iso3":"NOR","name":"Norwegian","population_size":5378857},{"country":"Poland","dbname":"plwiki","group":"pl","iso3":"POL","name":"Polish","population_size":37887768},{"country":"Portugal","dbname":"ptwiki","group":"pt","iso3":"PRT","name":"Portuguese","population_size":10226187},{"country":"Romania","dbname":"rowiki","group":"ro","iso3":"ROU","name":"Romanian","population_size":19364556},{"country":"Russia","dbname":"ruwiki","group":"ru","iso3":"RUS","name":"Russian","population_size":145872256},{"country":"Belarus","dbname":"ruwiki","group":"ru","iso3":"BLR","name":"Russian","population_size":9452411},{"country":"Russia","dbname":"bewiki","group":"ru","iso3":"RUS","name":"Belarusian","population_size":145872256},{"country":"Belarus","dbname":"bewiki","group":"ru","iso3":"BLR","name":"Belarusian","population_size":9452411},{"country":"Russia","dbname":"bxrwiki","group":"ru","iso3":"RUS","name":"Russia Buriat","population_size":145872256},{"country":"Belarus","dbname":"bxrwiki","group":"ru","iso3":"BLR","name":"Russia Buriat","population_size":9452411},{"country":"Slovenia","dbname":"slwiki","group":"sl","iso3":"SVN","name":"Slovenian","population_size":2078654},{"country":"Albania","dbname":"sqwiki","group":"sq","iso3":"ALB","name":"Albanian","population_size":2880917},{"country":"Serbia","dbname":"srwiki","group":"sr","iso3":"SRB","name":"Serbian","population_size":8772235},{"country":"Sweden","dbname":"svwiki","group":"sv","iso3":"SWE","name":"Swedish","population_size":10036379},{"country":"Turkey","dbname":"trwiki","group":"tr","iso3":"TUR","name":"Turkish","population_size":83429616},{"country":"United Kingdom","dbname":"ukwiki","group":"uk","iso3":"GBR","name":"Ukrainian","population_size":67530168},{"country":"Vietnam","dbname":"viwiki","group":"vi","iso3":"VNM","name":"Vietnamese","population_size":96462112},{"country":"China","dbname":"zhwiki","group":"zh","iso3":"CHN","name":"Chinese","population_size":1433783680},{"country":"China","dbname":"ganwiki","group":"zh","iso3":"CHN","name":"Gan Chinese","population_size":1433783680},{"country":"China","dbname":"cdowiki","group":"zh","iso3":"CHN","name":"Min Dong Chinese","population_size":1433783680},{"country":"China","dbname":"zh_classicalwiki","group":"zh","iso3":"CHN","name":"Classical Chinese","population_size":1433783680},{"country":"China","dbname":"zh_min_nanwiki","group":"zh","iso3":"CHN","name":"Chinese (Min Nan)","population_size":1433783680}]')},265:function(t,e,n){},276:function(t,e,n){"use strict";n.r(e);var a,i=n(0),r=n.n(i),o=n(66),s=n.n(o),c=(n(265),n(7)),u=n(8),l=n(10),d=n(11),p=n(46),g=n(6),h=n(9),m=n(32),b=n(4),f=n(2),v=n(135),y=n(48),j=n(1),x=Object(v.a)().domain([.29,.68]).range(["#ffedea","#ff5233"]),w=function(t){Object(l.a)(n,t);var e=Object(d.a)(n);function n(){var t;Object(c.a)(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(t=e.call.apply(e,[this].concat(i))).state={data:void 0},t.loadData=function(){f.d("maptest.csv").then((function(e){console.log(e),t.setState({data:e})}))},t}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.loadData()}},{key:"render",value:function(){var t,e,a=this;return Object(j.jsxs)("div",{children:[Object(j.jsxs)("div",{className:"flex",children:[Object(j.jsx)("div",{className:"w-3/4 inline-block",children:Object(j.jsx)(n,{})}),Object(j.jsx)("div",{className:"w-1/4 inline-block px-2",children:Object(j.jsxs)("button",{type:"button",className:"inline-flex justify-center w-full rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-100 focus:ring-indigo-500",id:"menu-button","aria-expanded":"true","aria-haspopup":"true",children:["Options",Object(j.jsx)("svg",{className:"-mr-1 ml-2 h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:Object(j.jsx)("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})]})})]}),Object(j.jsxs)(y.ComposableMap,{projectionConfig:{rotate:[-10,0,0],scale:147},children:[Object(j.jsx)(y.Sphere,{id:"test",fill:"blue",stroke:"#E4E5E6",strokeWidth:.5}),Object(j.jsx)(y.Graticule,{stroke:"#E4E5E6",strokeWidth:.5}),(null!==(t=null===(e=this.state.data)||void 0===e?void 0:e.length)&&void 0!==t?t:0)>0&&Object(j.jsx)(y.Geographies,{geography:"https://raw.githubusercontent.com/zcreativelabs/react-simple-maps/master/topojson-maps/world-110m.json",children:function(t){return t.geographies.map((function(t){var e,n=null===(e=a.state.data)||void 0===e?void 0:e.find((function(e){return e.ISO3===t.properties.ISO_A3}));return Object(j.jsx)(y.Geography,{geography:t,fill:n?x(Number(n[2017])):"#F5F4F6"},t.rsmKey)}))}})]})]})}}]),n}(r.a.Component),k=n(22);!function(t){t[t.AddTag=0]="AddTag",t[t.RemoveTag=1]="RemoveTag",t[t.SelectChangepoint=2]="SelectChangepoint",t[t.IncrementLoading=3]="IncrementLoading",t[t.DecrementLoading=4]="DecrementLoading"}(a||(a={}));var O,z={incrementLoading:function(){return{type:a.IncrementLoading}},decrementLoading:function(){return{type:a.DecrementLoading}}},A=Object(k.b)((function(t){var e,n;return{currentChangepoint:{changepoint:null===(e=t.changepoints)||void 0===e?void 0:e.changepoint,tag:null===(n=t.changepoints)||void 0===n?void 0:n.tag}}}),z);!function(t){t[t.Increase=0]="Increase",t[t.Decrease=1]="Decrease"}(O||(O={}));var C,T=function(t){Object(l.a)(n,t);var e=Object(d.a)(n);function n(t){var a;return Object(c.a)(this,n),(a=e.call(this,t)).container=void 0,a.svg=void 0,a.bounds=void 0,a.update=function(){var t,e,n,i=arguments.length>0&&void 0!==arguments[0]&&arguments[0];console.log("update barplots");var r=null===(t=a.container)||void 0===t||null===(e=t.node())||void 0===e?void 0:e.getBoundingClientRect(),o=null!==(n=null===r||void 0===r?void 0:r.width)&&void 0!==n?n:0;a.svg.attr("width",o).attr("height",a.props.height),a.bounds.attr("transform","translate(".concat(a.props.margins.left,", ").concat(a.props.margins.top,")")),a.bounds.select(".xLabelBar").attr("x",(o-a.props.margins.left-a.props.margins.right)/2).attr("y",a.props.height-a.props.margins.top-10);var s=f.f(a.state.data,(function(t){return t.views})),c=f.n().domain(s).range([0,o-a.props.margins.left-a.props.margins.right]);a.bounds.selectAll(".xAxis").attr("transform","translate(0, ".concat(a.props.height-a.props.margins.bottom-a.props.margins.top,")")).transition().duration(i?100:0).call(f.a(c)).selectAll("text").attr("transform","translate(-10,0)rotate(-45)").style("text-anchor","end");var u=f.m().range([0,a.props.height-a.props.margins.bottom-a.props.margins.top]).domain(a.state.data.map((function(t){return t.topic}))).padding(.1);a.bounds.selectAll(".yAxis").transition().duration(i?100:0).call(f.b(u)).selectAll("text").style("text-anchor","end");var l=a.bounds.selectAll(".bar").data(a.state.data);l.exit().remove();var d=l.enter().append("g").attr("class","bar");d.append("rect"),d.append("text");var p=a.bounds.selectAll(".bar");p.select("rect").attr("x",0).attr("y",(function(t){var e;return null!==(e=u(t.topic))&&void 0!==e?e:0})).attr("fill",a.props.color).attr("height",u.bandwidth()).attr("width",(function(t){return 0})),p.select("text").attr("class","barLabel").attr("opacity",0).style("font-size","12px").attr("text-anchor","end").attr("alignment-baseline","middle").attr("x",0).attr("y",(function(t){var e;return(null!==(e=u(t.topic))&&void 0!==e?e:0)+.5*u.bandwidth()})).text("test");var g=a.bounds.selectAll(".bar").transition().duration(i?800:0).delay((function(t,e){return i?100*e:0}));g.select("rect").attr("width",(function(t){return Math.abs(c(t.views))})),g.select("text").attr("opacity",(function(t){return Math.abs(c(t.views))>30?1:0})).attr("x",(function(t){return Math.abs(c(t.views))-5}))},a.addBarPlot=function(){a.container=f.r("#barplot-".concat(a.props.id,"-container")),a.svg=a.container.append("svg"),a.bounds=a.svg.append("g"),a.bounds.append("g").attr("class","xAxis"),a.bounds.append("text").attr("class","xLabelBar").style("font-size",15).attr("text-anchor","middle").text("absolute difference page views"),a.bounds.append("g").attr("class","yAxis"),f.d("https://raw.githubusercontent.com/holtzy/data_to_viz/master/Example_dataset/7_OneCatOneNum_header.csv").then((function(t){a.setState({data:t.map((function(t){var e,n;return{topic:null!==(e=t.Country)&&void 0!==e?e:"missing",views:null!==(n=Number(t.Value))&&void 0!==n?n:0}}))}),a.update(!0)}));window.addEventListener("resize",(function(){console.log("bar resize"),a.update()}))},a.state={data:[]},a}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.addBarPlot(),this.update(!0)}},{key:"render",value:function(){return Object(j.jsx)("div",{children:Object(j.jsx)("div",{id:"barplot-".concat(this.props.id,"-container")})})}}]),n}(r.a.Component),_=A(function(t){Object(l.a)(n,t);var e=Object(d.a)(n);function n(t){var a;return Object(c.a)(this,n),(a=e.call(this,t)).margins={top:30,right:30,bottom:60,left:100},a.height=400,a.state={},a}return Object(u.a)(n,[{key:"componentDidUpdate",value:function(t,e){this.props.currentChangepoint!==t.currentChangepoint&&console.log("would load changepoint",this.props.currentChangepoint,"here now")}},{key:"render",value:function(){return Object(j.jsxs)("div",{className:"flex",children:[Object(j.jsx)("div",{id:"barplot-increase-container",className:"w-1/2 inline-block",children:Object(j.jsx)(T,{id:"inc",height:this.height,color:"#34D399",margins:this.margins,typ:O.Increase})}),Object(j.jsx)("div",{id:"barplot-decrease-container",className:"w-1/2 inline-block",children:Object(j.jsx)(T,{id:"dec",color:"#F87171",height:this.height,margins:this.margins,typ:O.Decrease})})]})}}]),n}(r.a.Component)),N=n(14);!function(t){t[t.CountryStringency=0]="CountryStringency",t[t.CountryTopicAttention=1]="CountryTopicAttention",t[t.CountryTotal=2]="CountryTotal"}(C||(C={}));var S={activeTags:[]};var L=function(t,e){return null!==t&&void 0!==t&&(null!==e&&void 0!==e&&(t.getFullYear()===e.getFullYear()&&t.getMonth()===e.getMonth()&&t.getDate()===e.getDate()))},R={selectChangepoint:function(t){return{type:a.SelectChangepoint,payload:t}},incrementLoading:function(){return{type:a.IncrementLoading}},decrementLoading:function(){return{type:a.DecrementLoading}}},D=Object(k.b)((function(t){var e;return{activeTags:t.tags.activeTags,currentChangepoint:null===(e=t.changepoints)||void 0===e?void 0:e.changepoint}}),R)(function(t){Object(l.a)(n,t);var e=Object(d.a)(n);function n(t){var a;return Object(c.a)(this,n),(a=e.call(this,t)).container=void 0,a.svg=void 0,a.bounds=void 0,a.listeningRect=void 0,a.xScale=void 0,a.xAxis=void 0,a.yAxisStringency=void 0,a.yAxisPageViews=void 0,a.yScaleStringency=void 0,a.yScalePageViews=void 0,a.hoverLine=void 0,a.hoverLabel=void 0,a.hoverEnabled=!0,a.margin={top:10,right:40,bottom:35,left:30},a.height=300,a.update=function(){var t,e,n,i=arguments.length>0&&void 0!==arguments[0]&&arguments[0];console.log("update timeline");var r=null===(t=a.container)||void 0===t||null===(e=t.node())||void 0===e?void 0:e.getBoundingClientRect(),o=null!==(n=null===r||void 0===r?void 0:r.width)&&void 0!==n?n:0;a.svg.attr("width",o).attr("height",a.height),a.bounds.attr("transform","translate(".concat(a.margin.left,", ").concat(a.margin.top,")")),a.listeningRect.attr("width",o-a.margin.left-a.margin.right).attr("height",a.height-a.margin.top-a.margin.bottom),a.hoverLabel.attr("x",o-a.margin.left-a.margin.right-10).attr("y",a.height-a.margin.top-a.margin.bottom-10),a.hoverLine.attr("height",a.height-a.margin.top-a.margin.bottom);var s=Array.from(a.state.stringencies.entries()).map((function(t){var e=Object(h.a)(t,2),n=e[0],a=e[1];return{id:n,stringency:a.stringency.map((function(t){return{date:new Date(null===t||void 0===t?void 0:t.Date),value:Number(t.StringencyIndex),notes:t.Notes}})),changepoints:a.changepoints.map((function(t){return{date:new Date(t),id:n}}))}})),c=Array.from(a.state.topics.entries()).map((function(t){var e=Object(h.a)(t,2);return{id:e[0],traffic:e[1].traffic}}));a.bounds.select(".yLabelStringency").attr("opacity",s.length>0?1:0),a.bounds.select(".yLabelPageviews").attr("opacity",c.length>0?1:0).attr("transform","translate(".concat(o-a.margin.left-a.margin.right-10,",0)rotate(-90)"));var u=f.o(f.q).domain([].concat(Object(m.a)(s),Object(m.a)(c)).map((function(t){return t.id}))),l=[f.k(s,(function(t){return f.k(t.stringency,(function(t){return t.date}))})),f.j(s,(function(t){return f.j(t.stringency,(function(t){return t.date}))}))],d=[f.k(c,(function(t){return f.k(t.traffic,(function(t){return t.date}))})),f.j(c,(function(t){return f.j(t.traffic,(function(t){return t.date}))}))],p=f.f([].concat(l,d)),g=f.p().range([0,o-a.margin.left-a.margin.right]).domain(p);a.bounds.selectAll(".xAxis").attr("transform","translate(0, ".concat(a.height-a.margin.bottom-a.margin.top,")")).transition().duration(i?100:0).call(f.a(g)).selectAll("text").attr("transform","translate(-10,0)rotate(-45)").style("text-anchor","end");var b=[f.k(s,(function(t){return f.k(t.stringency,(function(t){return t.value}))})),f.j(s,(function(t){return f.j(t.stringency,(function(t){return t.value}))}))],v=f.n().range([a.height-a.margin.top-a.margin.bottom,0]).domain(b);a.bounds.selectAll(".yAxisStringency").transition().duration(i?100:0).call(f.b(v)).selectAll("text").style("text-anchor","end");var y=[f.k(c,(function(t){return f.k(t.traffic,(function(t){return t.views}))})),f.j(c,(function(t){return f.j(t.traffic,(function(t){return t.views}))}))],j=f.n().range([a.height-a.margin.top-a.margin.bottom,0]).domain(y);a.bounds.selectAll(".yAxisPageviews").attr("transform","translate(".concat(o-a.margin.left-a.margin.right,", 0)")).transition().duration(i?100:0).call(f.c(j)).selectAll("text").style("text-anchor","start");var x=a.bounds.selectAll(".stringency").data(s,(function(t){return t.id}));x.exit().remove();var w=x.enter().append("g").attr("class",(function(t){return"stringency ".concat(t.id)}));w.append("path").attr("class","line"),w.append("text").attr("class",(function(t){return"legend-".concat(t.id)})).attr("text-anchor","end").style("font-size","10px").attr("fill",(function(t){return u(t.id)})).attr("x",o-a.margin.left-a.margin.right-10).attr("y",(function(t,e){return a.height-a.margin.top-a.margin.bottom-35-15*e})).text((function(t){return t.id}));var k=f.i().x((function(t){return g(t.date)})).y((function(t){return v(t.value)})),O=function(t){return t.toLowerCase().replaceAll(":","-")};a.bounds.selectAll(".line").attr("stroke-dasharray","3, 3").attr("fill","none").attr("id",(function(t,e){return O(t.id)})).attr("stroke-width",2).attr("stroke-linecap","round").attr("d",(function(t,e){return k(t.stringency)})).style("stroke",(function(t){return u(t.id)}));var z=w.append("g").attr("class","changepoints").selectAll(".changepoint").data((function(t){return t.changepoints}));z.exit().remove(),z.enter().append("rect").attr("class","changepoint"),a.bounds.selectAll(".changepoint").attr("width","5px").attr("cursor","pointer").attr("fill",(function(t){return u(t.id)})).attr("opacity","0.1").attr("height",a.height-a.margin.top-a.margin.bottom).attr("x",(function(t){return g(t.date)})).on("click",(function(t,e){var n=f.r(t.currentTarget);void 0===a.props.currentChangepoint||L(e.date,a.props.currentChangepoint)||f.s(".changepoint").attr("opacity",.1);var i=L(e.date,a.props.currentChangepoint);n.classed("selected",!i).attr("opacity",(function(t){return i?.1:.5})),a.props.selectChangepoint({changepoint:i?void 0:e.date,tag:i?void 0:a.props.activeTags.find((function(t){return t.title===e.id}))})})).on("mouseover",(function(t,e){f.r(t.currentTarget).attr("opacity",.5)})).on("mouseout",(function(t,e){f.r(t.currentTarget).attr("opacity",(function(t){return t.date===a.props.currentChangepoint?.5:.1}))})),f.s(".line").each((function(t,e){var n,a,r,s=null!==(n=null===(a=f.r("#"+O(t.id)))||void 0===a||null===(r=a.node())||void 0===r?void 0:r.getTotalLength())&&void 0!==n?n:o;f.s("#"+O(t.id)).attr("stroke-dasharray",s+" "+s).attr("stroke-dashoffset",s).transition().duration(i?1e3:0).delay(i?100*(e+0):0).ease(f.e).attr("stroke-dashoffset",0)})),a.listeningRect.on("click",(function(t,e){a.hoverEnabled=!a.hoverEnabled})).on("mousemove",(function(t,e){if(a.hoverEnabled){var n=f.l(t)[0],i=g.invert(n);if(a.hoverLabel.text(f.t("%B %d, %Y")(i)),a.hoverLine.attr("x",g(i)),1===s.length){var r=function(t){var e,n;return Math.abs((null!==(e=null===(n=t.date)||void 0===n?void 0:n.getTime())&&void 0!==e?e:0)-i.getTime())},o=s[0].stringency.filter((function(t){return t.notes.length>0})),c=f.h(o,(function(t,e){return r(t)-r(e)}));if(void 0!==c){var u,l=o[c];a.setState({notes:Object(m.a)(new Set(null!==(u=null===l||void 0===l?void 0:l.notes.map((function(t){return t.replace(/(\(?\s*(Sources?:\s*)?(https?:\/\/(www\.)?[-a-zA-Z0-9@:%._\\+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_\\+.~#?&//=]*)\s*)+\)?)/gim," [...] ")})))&&void 0!==u?u:[]))})}}else a.setState({notes:[]})}}))},a.addTimeline=function(){a.container=f.r("#timeline-container"),a.svg=a.container.append("svg").attr("x",0).attr("y",0),a.bounds=a.svg.append("g"),a.bounds.append("g").attr("class","xAxis"),a.bounds.append("g").attr("class","yAxisStringency"),a.bounds.append("g").attr("class","yAxisPageviews"),a.bounds.append("text").attr("class","yLabelStringency").attr("text-anchor","end").attr("transform","translate(15,0)rotate(-90)").text("stringency index"),a.bounds.append("text").attr("class","yLabelPageviews").attr("text-anchor","end").text("pageviews"),a.listeningRect=a.bounds.append("rect").attr("class","listening-rect").attr("fill","transparent"),a.hoverLine=a.bounds.append("g").append("rect").attr("class","hoverline").attr("stroke-width","1px").attr("width",".5px"),a.hoverLabel=a.bounds.append("svg:text"),a.hoverLabel.text("").style("text-anchor","end").style("fill","black").style("font-size",15);window.addEventListener("resize",(function(){a.update()}))},a.state={stringencies:new Map,topics:new Map,notes:[]},a}return Object(u.a)(n,[{key:"loadData",value:function(t){var e=this;return new Promise((function(n,a){e.props.incrementLoading(),f.g(t.url).then((function(t){if(void 0===t)return a();n(t)})).finally((function(){return e.props.decrementLoading()}))}))}},{key:"componentDidUpdate",value:function(t,e){var n=this;if(this.props.activeTags!==t.activeTags){console.log("tags changed");var a=Array.from(this.state.stringencies.keys()).filter((function(t){return!n.props.activeTags.map((function(t){return t.title})).includes(t)})),i=Array.from(this.state.topics.keys()).filter((function(t){return!n.props.activeTags.map((function(t){return t.title})).includes(t)}));a.length+i.length>0&&(this.setState((function(t){return a.forEach((function(e){return t.stringencies.delete(e)})),i.forEach((function(e){return t.topics.delete(e)})),t})),this.update(!0));var r,o=Object(b.a)(this.props.activeTags);try{var s=function(){var t=r.value;switch(t.typ){case C.CountryStringency:t.title in n.state.topics||n.loadData(t).then((function(e){n.setState((function(n){return n.stringencies.set(t.title,e),n})),n.update(!0)}));break;case C.CountryTotal:t.title in n.state.topics||n.loadData(t).then((function(e){n.setState((function(n){return n.topics.set(t.title,e),n})),n.update()}));break;case C.CountryTopicAttention:t.title in n.state.topics||n.update()}};for(o.s();!(r=o.n()).done;)s()}catch(c){o.e(c)}finally{o.f()}}}},{key:"componentDidMount",value:function(){this.addTimeline(),this.update(!0)}},{key:"render",value:function(){return Object(j.jsxs)("div",{className:"Timeline",children:[Object(j.jsx)("div",{className:"",id:"timeline-container"}),Object(j.jsx)("div",{className:"notes h-20 px-2 overflow-y-scroll text-gray-500 text-xs",children:this.state.notes})]})}}]),n}(r.a.Component)),E=n(140),I=(n(137),{addTag:function(t){return{type:a.AddTag,payload:{tag:t}}},removeTag:function(t){return{type:a.RemoveTag,payload:{tag:t}}}}),B=Object(k.b)((function(t){return{activeTags:t.tags.activeTags}}),I),U=function(t){var e="bg-red-200 text-red-700";switch(t){case C.CountryTotal:e="bg-gray-200 text-gray-700";break;case C.CountryTopicAttention:e="bg-blue-200 text-blue-700"}return e},M=B(function(t){Object(l.a)(n,t);var e=Object(d.a)(n);function n(t){var a;Object(c.a)(this,n),(a=e.call(this,t)).handleUpdateSearchText=function(t){a.setState({searchText:t.target.value})};var i=[],r=["Medicine","Sports","Vaccination","Television","Do-it-yourself"],o=new Map;return E.forEach((function(t){var e="".concat(t.country.replaceAll(" ","-"),":Stringency");o.has(e)||(i.push({typ:C.CountryStringency,country:t.country,lang:t.group,iso3:t.iso3,url:"data/".concat(t.group,"/").concat(t.country,"/stringency_changepoints.json"),title:e}),o.set(e,!0)),e="".concat(t.country.replaceAll(" ","-"),":Total"),o.has(e)||(i.push({typ:C.CountryTotal,country:t.country,lang:t.group,iso3:t.iso3,url:"data/".concat(t.group,"/").concat(t.country,"/total.json"),title:e}),o.set(e,!0)),r.forEach((function(n){e="".concat(t.country.replaceAll(" ","-"),":Topic:").concat(n),o.has(e)||(i.push({typ:C.CountryTopicAttention,country:t.country,lang:t.group,iso3:t.iso3,url:"data/".concat(t.group,"/").concat(t.country,"/topic_").concat(n,".json"),title:e}),o.set(e,!0))}))})),a.state={availableTags:i,searchText:""},a}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var t=this;this.state.availableTags.filter((function(t){return"Germany:Stringency"===t.title})).filter((function(e){return!t.props.activeTags.some((function(t){return e.title===t.title}))})).forEach((function(e){console.log("adding",e),t.props.addTag(e)}))}},{key:"render",value:function(){var t=this,e=this.props.activeTags.map((function(e){return Object(j.jsxs)("div",{onClick:function(){return t.props.removeTag(e)},className:"text-xs inline-flex opacity-75 hover:opacity-100 cursor-pointer items-center font-bold leading-sm uppercase px-3 py-1 m-1 rounded-full "+U(e.typ),children:[Object(j.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(j.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})}),e.title]},e.title)})),n=function(t){if(!t[0])return 0;if(1===t.length)return t[0].length;for(var e=0,n=!1;t[0][e];){var a,i=Object(b.a)(t);try{for(i.s();!(a=i.n()).done;){if(a.value[e]!==t[0][e]){n=!0;break}}}catch(r){i.e(r)}finally{i.f()}if(n)break;e++}return t[0].substr(0,e).length},a=function(t,e){for(var a=0;t.length>0&&e.length>0;){var i=0,r=0,o=0;for(var s in e)for(var c in t){var u=n([t[c],e[s]]);u>=i&&(i=u,r=Number(c),o=Number(s))}a+=i,t.splice(r,1),e.splice(o,1)}return a},i=this.state.searchText.toLowerCase().replaceAll(":"," ").split(" ").filter((function(t){return t.length>0})),r=this.state.availableTags.filter((function(e){return!t.props.activeTags.map((function(t){return t.title})).includes(e.title)})).map((function(t){return[t,a(Object(m.a)(i),t.title.toLowerCase().split(":"))]})).sort((function(t,e){var n=Object(h.a)(t,2),a=(n[0],n[1]),i=Object(h.a)(e,2);i[0];return i[1]-a})).slice(0,8).map((function(e){var n=Object(h.a)(e,2),a=n[0];n[1];return Object(j.jsxs)("div",{onClick:function(){return t.props.addTag(a)},className:"text-xs inline-flex opacity-75 hover:opacity-100 cursor-pointer items-center font-normal leading-sm max-w-full break-all uppercase pl-1 pr-2 py-1 m-1 rounded-full "+U(a.typ),children:[Object(j.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(j.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),a.title]},a.title)}));return Object(j.jsxs)("div",{className:"Main",children:[Object(j.jsx)("div",{className:"flex",children:Object(j.jsx)("div",{className:"tags",children:e})}),Object(j.jsxs)("div",{className:"flex",children:[Object(j.jsx)("div",{className:"w-3/4 inline-block",children:Object(j.jsx)(D,{})}),Object(j.jsxs)("div",{className:"w-1/4 inline-block px-2 py-1",children:[Object(j.jsx)("input",{className:"focus:border-light-blue-500 focus:ring-1 focus:ring-light-blue-500 focus:outline-none w-full text-sm text-black placeholder-gray-500 border border-gray-200 rounded-md py-2 pl-1",type:"text",value:this.state.searchText,onChange:this.handleUpdateSearchText,"aria-label":"Search",placeholder:"Search"}),Object(j.jsx)("div",{children:Object(j.jsx)("div",{className:"tags overflow-y-scroll",children:r})})]})]}),Object(j.jsxs)("ul",{className:"flex border-b",children:[Object(j.jsx)("li",{className:"-mb-px ml-2",children:Object(j.jsx)(p.b,{className:"font-semibold bg-white inline-block py-1 px-2 cursor-pointer text-gray-800 border-l border-t border-r rounded-t",to:"/",children:"Attention Shift"})}),Object(j.jsx)("li",{className:"ml-2",children:Object(j.jsx)(p.b,{onClick:function(t){return t.preventDefault()},className:"font-semibold bg-white inline-block py-1 px-2  text-gray-200 cursor-default hover:text-gray-200",to:"/map",children:"Map"})})]}),Object(j.jsxs)("div",{className:"tabContent mb-5",children:[Object(j.jsx)(g.a,{exact:!0,path:"/map",component:w}),Object(j.jsx)(g.a,{exact:!0,path:"/",component:_})]})]})}}]),n}(r.a.Component)),P=function(t){Object(l.a)(n,t);var e=Object(d.a)(n);function n(){var t;Object(c.a)(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(t=e.call.apply(e,[this].concat(i))).state={},t}return Object(u.a)(n,[{key:"render",value:function(){return Object(j.jsx)("div",{className:"About",children:"This is an about page"})}}]),n}(r.a.Component),F=n.p+"static/media/covid19_2.f14dc517.jpg",G=n.p+"static/media/VU_2.97ce354c.png",H=Object(k.b)((function(t){var e;return{loadingCount:null===(e=t.loading)||void 0===e?void 0:e.loadingCount}}),{})(function(t){Object(l.a)(n,t);var e=Object(d.a)(n);function n(t){var a;return Object(c.a)(this,n),(a=e.call(this,t)).state={loading:!0},a}return Object(u.a)(n,[{key:"render",value:function(){return Object(j.jsx)("div",{className:"App",children:Object(j.jsxs)(p.a,{children:[Object(j.jsxs)("nav",{className:"flex items-center justify-between flex-wrap bg-blue-300 p-2",children:[Object(j.jsxs)(p.b,{to:"/",className:"flex items-center flex-shrink-1 text-white mr-4",children:[Object(j.jsx)("img",{className:"rounded-full max-h-6 p-0 mr-2",alt:"Covid-19 Logo",src:F}),Object(j.jsx)("span",{className:"font-semibold text-l tracking-tight text-black",children:"COVID-19 Wikipedia Attention"})]}),Object(j.jsxs)("div",{className:"block flex-grow flex items-center place-items-start w-auto",children:[Object(j.jsx)("div",{className:"text-sm flex-grow"}),Object(j.jsx)("div",{className:"mr-3",children:this.props.loadingCount>0&&Object(j.jsx)("div",{className:"block animate-spin h-4 w-4 rounded-full border-b-2 border-gray-900"})}),Object(j.jsx)("div",{className:"mr-1",children:Object(j.jsx)("a",{href:"https://vu.nl",children:Object(j.jsx)("img",{className:"inline-block rounded-full max-h-6 p-0 bg-white px-2",alt:"VU University Logo",src:G})})}),Object(j.jsx)("div",{children:Object(j.jsx)("a",{href:"https://github.com/romnn/lsde2021",className:"inline-block text-sm px-4 py-2 leading-none border rounded text-black border-transparent hover:border-white",children:"GitHub"})})]})]}),Object(j.jsx)(g.a,{exact:!0,path:"/",component:M}),Object(j.jsx)(g.a,{exact:!0,path:"/about",component:P})]})})}}]),n}(r.a.Component)),V=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,282)).then((function(e){var n=e.getCLS,a=e.getFID,i=e.getFCP,r=e.getLCP,o=e.getTTFB;n(t),a(t),i(t),r(t),o(t)}))},K=n(75),J={changepoint:void 0,tag:void 0};var W={loadingCount:0};var Z=Object(K.a)({tags:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case a.AddTag:var n=e.payload.tag;return Object(N.a)(Object(N.a)({},t),{},{activeTags:[].concat(Object(m.a)(t.activeTags),[n])});case a.RemoveTag:var i=e.payload.tag;return Object(N.a)(Object(N.a)({},t),{},{activeTags:t.activeTags.filter((function(t){return t.title!==i.title}))});default:return t}},changepoints:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case a.SelectChangepoint:var n=e.payload,i=n.changepoint,r=n.tag;return Object(N.a)(Object(N.a)({},t),{},{changepoint:i,tag:r});default:return t}},loading:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case a.IncrementLoading:return Object(N.a)(Object(N.a)({},t),{},{loadingCount:t.loadingCount+1});case a.DecrementLoading:return Object(N.a)(Object(N.a)({},t),{},{loadingCount:t.loadingCount-1});default:return t}}}),Y=Object(K.b)(Z);s.a.render(Object(j.jsx)(r.a.StrictMode,{children:Object(j.jsx)(k.a,{store:Y,children:Object(j.jsx)(H,{})})}),document.getElementById("root")),V()}},[[276,1,2]]]);
//# sourceMappingURL=main.8759bcaa.chunk.js.map