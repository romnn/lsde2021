{"version":3,"sources":["store/actions.ts","Map.tsx","TopicBarPlot.tsx","store/reducers/tags.ts","utils.ts","Timeline.tsx","Main.tsx","About.tsx","images/covid19_2.jpg","images/VU_2.png","App.tsx","reportWebVitals.ts","store/reducers/changepoints.ts","store/reducers/loading.ts","store/reducers/index.ts","store/index.ts","index.tsx"],"names":["Action","colorScale","scaleLinear","domain","range","WorldMap","state","data","undefined","loadData","d3","then","console","log","setState","this","className","type","id","aria-expanded","aria-haspopup","xmlns","viewBox","fill","aria-hidden","fillRule","d","clipRule","projectionConfig","rotate","scale","stroke","strokeWidth","length","geography","geographies","map","geo","find","s","ISO3","properties","ISO_A3","Number","rsmKey","React","Component","AttentionType","mapDispatch","incrementLoading","IncrementLoading","decrementLoading","DecrementLoading","connector","connect","currentChangepoint","changepoint","changepoints","tag","TagType","BarPlot","props","container","svg","bounds","update","animated","bbox","node","getBoundingClientRect","width","attr","height","margins","left","top","select","right","xExtent","diff","xScale","selectAll","bottom","transition","duration","call","style","yScale","topic","padding","bars","exit","remove","newBar","enter","append","updated","color","bandwidth","text","animation","delay","i","Math","abs","addBarPlot","Country","Value","window","addEventListener","prevProps","prevState","typ","Increase","Decrease","initialState","activeTags","isSameDate","d1","d2","getFullYear","getMonth","getDate","selectChangepoint","payload","SelectChangepoint","tags","listeningRect","xAxis","yAxisStringency","yAxisPageViews","yScaleStringency","yScalePageViews","hoverLine","hoverLabel","hoverEnabled","margin","stringencies","Array","from","entries","stringency","date","Date","value","StringencyIndex","notes","Notes","pageviews","topics","traffic","xExtentStringencies","xExtentPageviews","yExtentStringency","yExtentPageviews","views","yScalePageviews","stringenciesProj","stringenciesProjContainer","line","x","y","lineID","title","toLowerCase","replaceAll","on","event","current","currentTarget","alreadySelected","classed","t","each","totalLength","getTotalLength","ease","mouseX","hoveredDate","invert","dist","getTime","stringencyWithNotes","filter","closestIndexWithNotes","a","b","closestDataPoint","Set","n","replace","addTimeline","Map","Promise","resolve","reject","url","finally","removeStringencies","keys","includes","removeTopics","forEach","delete","CountryStringency","set","CountryTotal","CountryTopicAttention","addTag","AddTag","removeTag","RemoveTag","tagColor","handleUpdateSearchText","searchText","target","availableTags","LANGUAGE_COUNTRIES","lc","country","has","push","lang","group","iso3","some","tt","onClick","strokeLinecap","strokeLinejoin","longestPrefix","words","done","substr","searchMatchScorer","query","totalScore","maxScore","maxQi","maxTi","ti","qi","score","splice","searchPrefixes","split","scoredAvailableTags","sort","scoreA","slice","onChange","aria-label","placeholder","tabStyle","to","preventDefault","exact","path","component","TopicBarPlot","About","loadingCount","loading","alt","src","covidLogo","href","vuLogo","Main","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","combineReducers","action","store","createStore","rootReducer","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.5f935f97.chunk.js","sourcesContent":["enum Action {\n  AddTag,\n  RemoveTag,\n  SelectChangepoint,\n  IncrementLoading,\n  DecrementLoading,\n}\n\nexport { Action };\n","import React from \"react\";\nimport * as d3 from \"d3\";\nimport { scaleLinear } from \"d3-scale\";\nimport {\n  ComposableMap,\n  Geographies,\n  Geography,\n  Sphere,\n  Graticule,\n} from \"react-simple-maps\";\n\nconst geoUrl =\n  \"https://raw.githubusercontent.com/zcreativelabs/react-simple-maps/master/topojson-maps/world-110m.json\";\n\nconst colorScale = scaleLinear<string>()\n  .domain([0.29, 0.68])\n  .range([\"#ffedea\", \"#ff5233\"]);\n\ntype WorldMapProps = {};\n\ntype Cols =\n  | \"ISO3\"\n  | \"Name\"\n  | \"1995\"\n  | \"1996\"\n  | \"1997\"\n  | \"1998\"\n  | \"1999\"\n  | \"2000\"\n  | \"2001\"\n  | \"2002\"\n  | \"2003\"\n  | \"2004\"\n  | \"2005\"\n  | \"2006\"\n  | \"2007\"\n  | \"2008\"\n  | \"2009\"\n  | \"2010\"\n  | \"2011\"\n  | \"2012\"\n  | \"2013\"\n  | \"2014\"\n  | \"2015\"\n  | \"2016\"\n  | \"2017\";\n\ntype WorldMapState = {\n  data: d3.DSVRowArray<Cols> | undefined;\n};\n\nexport default class WorldMap extends React.Component<\n  WorldMapProps,\n  WorldMapState\n> {\n  state: WorldMapState = {\n    data: undefined,\n  };\n\n  loadData = () => {\n    d3.csv<Cols>(\"maptest.csv\").then((data) => {\n      console.log(data);\n      this.setState({\n        data,\n      });\n    });\n  };\n\n  componentDidMount() {\n    this.loadData();\n  }\n\n  render() {\n    return (\n      <div>\n        <div className=\"flex\">\n          <div className=\"w-3/4 inline-block\">\n            <WorldMap />\n          </div>\n          <div className=\"w-1/4 inline-block px-2\">\n            <button\n              type=\"button\"\n              className=\"inline-flex justify-center w-full rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-100 focus:ring-indigo-500\"\n              id=\"menu-button\"\n              aria-expanded=\"true\"\n              aria-haspopup=\"true\"\n            >\n              Options\n              <svg\n                className=\"-mr-1 ml-2 h-5 w-5\"\n                xmlns=\"http://www.w3.org/2000/svg\"\n                viewBox=\"0 0 20 20\"\n                fill=\"currentColor\"\n                aria-hidden=\"true\"\n              >\n                <path\n                  fillRule=\"evenodd\"\n                  d=\"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z\"\n                  clipRule=\"evenodd\"\n                />\n              </svg>\n            </button>\n          </div>\n        </div>\n\n        <ComposableMap\n          projectionConfig={{\n            rotate: [-10, 0, 0],\n            scale: 147,\n          }}\n        >\n          <Sphere id=\"test\" fill=\"blue\" stroke=\"#E4E5E6\" strokeWidth={0.5} />\n          <Graticule stroke=\"#E4E5E6\" strokeWidth={0.5} />\n          {(this.state.data?.length ?? 0) > 0 && (\n            <Geographies geography={geoUrl}>\n              {({ geographies }) =>\n                geographies.map((geo) => {\n                  const d = this.state.data?.find(\n                    (s) => s.ISO3 === geo.properties.ISO_A3\n                  );\n                  return (\n                    <Geography\n                      key={geo.rsmKey}\n                      geography={geo}\n                      fill={d ? colorScale(Number(d[\"2017\"])) : \"#F5F4F6\"}\n                    />\n                  );\n                })\n              }\n            </Geographies>\n          )}\n        </ComposableMap>\n      </div>\n    );\n  }\n}\n","import React from \"react\";\nimport * as d3 from \"d3\";\nimport { connect, ConnectedProps } from \"react-redux\";\nimport { Action } from \"./store/actions\";\nimport { RootState } from \"./store\";\n\nconst mapState = (state: RootState) => ({\n  currentChangepoint: {\n    changepoint: state.changepoints?.changepoint,\n    tag: state.changepoints?.tag,\n  },\n});\n\nconst mapDispatch = {\n  incrementLoading: () => ({\n    type: Action.IncrementLoading,\n  }),\n  decrementLoading: () => ({\n    type: Action.DecrementLoading,\n  }),\n};\n\nconst connector = connect(mapState, mapDispatch);\ntype PropsFromRedux = ConnectedProps<typeof connector>;\n\nenum AttentionType {\n  Increase,\n  Decrease,\n}\n\ntype Margins = {\n  top: number;\n  right: number;\n  bottom: number;\n  left: number;\n};\n\ntype BarPlotProps = {\n  id: string;\n  color: string;\n  typ: AttentionType;\n  height: number;\n  margins: Margins;\n};\n\ntype TopicDiffs = { topic: string; diff: number };\n\ntype BarPlotState = {\n  data: TopicDiffs[];\n};\n\ntype TestCols = \"Country\" | \"Value\";\n\nclass BarPlot extends React.Component<BarPlotProps, BarPlotState> {\n  container!: d3.Selection<HTMLDivElement, any, HTMLElement, any>;\n  svg!: d3.Selection<SVGSVGElement, any, HTMLElement, any>;\n  bounds!: d3.Selection<SVGGElement, any, HTMLElement, any>;\n\n  constructor(props: BarPlotProps) {\n    super(props);\n    this.state = {\n      data: [],\n    };\n  }\n\n  update = (animated: boolean = false) => {\n    console.log(\"update barplots\");\n    const bbox = this.container?.node()?.getBoundingClientRect();\n    const width = bbox?.width ?? 0;\n    this.svg.attr(\"width\", width).attr(\"height\", this.props.height);\n    this.bounds.attr(\n      \"transform\",\n      `translate(${this.props.margins.left}, ${this.props.margins.top})`\n    );\n    this.bounds\n      .select(\".xLabelBar\")\n      .attr(\n        \"x\",\n        (width - this.props.margins.left - this.props.margins.right) / 2\n      )\n      .attr(\"y\", this.props.height - this.props.margins.top - 10);\n\n    // calculate extent\n    const xExtent = d3.extent(this.state.data, (d) => d.diff) as [\n      number,\n      number\n    ];\n\n    // X axis\n    const xScale = d3\n      .scaleLinear()\n      .domain(xExtent)\n      .range([0, width - this.props.margins.left - this.props.margins.right]);\n\n    this.bounds\n      .selectAll<SVGGElement, any>(\".xAxis\")\n      .attr(\n        \"transform\",\n        `translate(0, ${\n          this.props.height - this.props.margins.bottom - this.props.margins.top\n        })`\n      )\n      .transition()\n      .duration(animated ? 100 : 0)\n      .call(d3.axisBottom(xScale))\n      .selectAll(\"text\")\n      .attr(\"transform\", \"translate(-10,0)rotate(-45)\")\n      .style(\"text-anchor\", \"end\");\n\n    // Y axis\n    const yScale = d3\n      .scaleBand()\n      .range([\n        0,\n        this.props.height - this.props.margins.bottom - this.props.margins.top,\n      ])\n      .domain(this.state.data.map((d) => d.topic))\n      .padding(0.1);\n\n    this.bounds\n      .selectAll<SVGGElement, any>(\".yAxis\")\n      .transition()\n      .duration(animated ? 100 : 0)\n      .call(d3.axisLeft(yScale))\n      .selectAll(\"text\")\n      .style(\"text-anchor\", \"end\");\n\n    //Bars\n    const bars = this.bounds\n      .selectAll<SVGRectElement, TopicDiffs>(\".bar\")\n      .data<TopicDiffs>(this.state.data);\n\n    bars.exit().remove();\n    const newBar = bars.enter().append(\"g\").attr(\"class\", \"bar\");\n\n    newBar.append(\"rect\");\n    newBar.append(\"text\");\n\n    const updated = this.bounds.selectAll<SVGRectElement, TopicDiffs>(\".bar\");\n\n    updated\n      .select(\"rect\")\n      .attr(\"x\", 0)\n      .attr(\"y\", (d) => yScale(d.topic) ?? 0)\n      .attr(\"fill\", this.props.color)\n      .attr(\"height\", yScale.bandwidth())\n      .attr(\"width\", (d) => 0);\n\n    updated\n      .select(\"text\")\n      .attr(\"class\", \"barLabel\")\n      .attr(\"opacity\", 0)\n      .style(\"font-size\", \"12px\")\n      .attr(\"text-anchor\", \"end\")\n      .attr(\"alignment-baseline\", \"middle\")\n      .attr(\"x\", 0)\n      .attr(\"y\", (d) => (yScale(d.topic) ?? 0) + 0.5 * yScale.bandwidth())\n      .text(\"test\");\n\n    const animation = this.bounds\n      .selectAll<SVGRectElement, TopicDiffs>(\".bar\")\n      .transition()\n      .duration(animated ? 800 : 0)\n      .delay((d, i) => (animated ? i * 100 : 0));\n\n    animation.select(\"rect\").attr(\"width\", (d) => Math.abs(xScale(d.diff)));\n\n    animation\n      .select(\"text\")\n      .attr(\"opacity\", (d) => (Math.abs(xScale(d.diff)) > 30 ? 1 : 0))\n      .attr(\"x\", (d) => Math.abs(xScale(d.diff)) - 5);\n  };\n\n  addBarPlot = () => {\n    this.container = d3.select<HTMLDivElement, any>(\n      `#barplot-${this.props.id}-container`\n    );\n\n    this.svg = this.container.append(\"svg\");\n    this.bounds = this.svg.append(\"g\");\n\n    // add axis\n    this.bounds.append(\"g\").attr(\"class\", \"xAxis\");\n\n    this.bounds\n      .append(\"text\")\n      .attr(\"class\", \"xLabelBar\")\n      .style(\"font-size\", 15)\n      .attr(\"text-anchor\", \"middle\")\n      .text(\"absolute difference page views\");\n\n    this.bounds.append(\"g\").attr(\"class\", \"yAxis\");\n\n    d3.csv<TestCols>(\n      \"https://raw.githubusercontent.com/holtzy/data_to_viz/master/Example_dataset/7_OneCatOneNum_header.csv\"\n    ).then((data) => {\n      this.setState({\n        data: data.map((d) => {\n          return { topic: d.Country ?? \"missing\", diff: Number(d.Value) ?? 0 };\n        }),\n      });\n      this.update(true);\n    });\n\n    const resize = () => {\n      console.log(\"bar resize\");\n      this.update();\n    };\n    window.addEventListener(\"resize\", resize);\n  };\n\n  componentDidMount() {\n    this.addBarPlot();\n    this.update(true);\n  }\n\n  render() {\n    return (\n      <div>\n        <div id={`barplot-${this.props.id}-container`}></div>\n      </div>\n    );\n  }\n}\n\ninterface TopicAttentionProps extends PropsFromRedux {}\n\ntype TopicAttentionState = {};\n\nclass TopicAttention extends React.Component<\n  TopicAttentionProps,\n  TopicAttentionState\n> {\n  margins = { top: 30, right: 30, bottom: 60, left: 100 };\n  height = 400;\n\n  constructor(props: TopicAttentionProps) {\n    super(props);\n    this.state = {};\n  }\n\n  componentDidUpdate(\n    prevProps: TopicAttentionProps,\n    prevState: TopicAttentionState\n  ) {\n    if (this.props.currentChangepoint !== prevProps.currentChangepoint) {\n      // todo: load data here\n      // set the data as prop for the two bar plots\n      console.log(\n        \"would load changepoint\",\n        this.props.currentChangepoint,\n        \"here now\"\n      );\n    }\n  }\n\n  render() {\n    return (\n      <div className=\"flex\">\n        <div id=\"barplot-increase-container\" className=\"w-1/2 inline-block\">\n          <BarPlot\n            id=\"inc\"\n            height={this.height}\n            color=\"#34D399\"\n            margins={this.margins}\n            typ={AttentionType.Increase}\n          />\n        </div>\n        <div id=\"barplot-decrease-container\" className=\"w-1/2 inline-block\">\n          <BarPlot\n            id=\"dec\"\n            color=\"#F87171\"\n            height={this.height}\n            margins={this.margins}\n            typ={AttentionType.Decrease}\n          />\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default connector(TopicAttention);\n","import { Action } from \"../actions\";\nimport { AnyAction } from \"redux\";\n\nenum TagType {\n  CountryStringency,\n  CountryTopicAttention,\n  CountryTotal,\n}\n\ntype Tag = {\n  typ: TagType;\n  country: string;\n  lang: string;\n  iso3: string;\n  url: string;\n  title: string;\n};\n\ntype TagState = {\n  readonly activeTags: Tag[];\n};\n\nconst initialState: TagState = {\n  activeTags: [],\n};\n\nexport { TagType };\nexport type { TagState, Tag };\n\nexport default function tagReducer(state = initialState, action: AnyAction) {\n  switch (action.type) {\n    case Action.AddTag: {\n      const { tag } = action.payload;\n      return {\n        ...state,\n        activeTags: [...state.activeTags, tag],\n      };\n    }\n    case Action.RemoveTag: {\n      const { tag } = action.payload;\n      return {\n        ...state,\n        activeTags: state.activeTags.filter((t) => t.title !== tag.title),\n      };\n    }\n\n    default:\n      return state;\n  }\n}\n","export const isSameDate = (\n  d1: Date | null | undefined,\n  d2: Date | null | undefined\n): boolean => {\n  if (d1 === null || d1 === undefined) return false;\n  if (d2 === null || d2 === undefined) return false;\n  return (\n    d1.getFullYear() === d2.getFullYear() &&\n    d1.getMonth() === d2.getMonth() &&\n    d1.getDate() === d2.getDate()\n  );\n};\n","import React from \"react\";\nimport * as d3 from \"d3\";\nimport { connect, ConnectedProps } from \"react-redux\";\nimport { Action } from \"./store/actions\";\nimport { Tag, TagType } from \"./store/reducers/tags\";\nimport { RootState } from \"./store\";\nimport { isSameDate } from \"./utils\";\n\ntype Stringency = {\n  Date: string;\n  StringencyIndex: number;\n  Notes: string[];\n};\n\ntype Country = {\n  code: string;\n  group: string;\n  name: string;\n};\n\ntype Changepoints = string[];\n\ntype CountryStringency = {\n  country: Country;\n  changepoints: Changepoints;\n  stringency: Stringency[];\n};\n\ntype Pageview = {\n  date: Date;\n  views: number;\n};\n\ntype CountryTopicAttention = {\n  country: Country;\n  traffic: Pageview[];\n};\n\nconst mapState = (state: RootState) => ({\n  activeTags: state.tags.activeTags,\n  currentChangepoint: state.changepoints?.changepoint,\n});\n\nconst mapDispatch = {\n  selectChangepoint: (payload: {\n    changepoint: Date | undefined;\n    tag: Tag | undefined;\n  }) => ({\n    type: Action.SelectChangepoint,\n    payload,\n  }),\n  incrementLoading: () => ({\n    type: Action.IncrementLoading,\n  }),\n  decrementLoading: () => ({\n    type: Action.DecrementLoading,\n  }),\n};\n\nconst connector = connect(mapState, mapDispatch);\ntype PropsFromRedux = ConnectedProps<typeof connector>;\n\ninterface TimelineProps extends PropsFromRedux {}\n\ntype TimelineState = {\n  stringencies: Map<string, CountryStringency>;\n  topics: Map<string, CountryTopicAttention>;\n  notes: string[];\n};\n\nclass Timeline extends React.Component<TimelineProps, TimelineState> {\n  container!: d3.Selection<HTMLDivElement, any, HTMLElement, any>;\n  svg!: d3.Selection<SVGSVGElement, any, HTMLElement, any>;\n  bounds!: d3.Selection<SVGGElement, any, HTMLElement, any>;\n  listeningRect!: d3.Selection<SVGRectElement, any, HTMLElement, any>;\n  xScale!: d3.ScaleTime<number, number>;\n  xAxis!: d3.Selection<SVGGElement, any, HTMLElement, any>;\n  yAxisStringency!: d3.Selection<SVGGElement, any, HTMLElement, any>;\n  yAxisPageViews!: d3.Selection<SVGGElement, any, HTMLElement, any>;\n  yScaleStringency!: d3.ScaleLinear<number, number>;\n  yScalePageViews!: d3.ScaleLinear<number, number>;\n  hoverLine!: d3.Selection<SVGRectElement, any, HTMLElement, any>;\n  hoverLabel!: d3.Selection<SVGTextElement, any, HTMLElement, any>;\n\n  hoverEnabled: boolean = true;\n  margin = { top: 10, right: 40, bottom: 35, left: 30 };\n  height = 300;\n\n  constructor(props: TimelineProps) {\n    super(props);\n    this.state = {\n      stringencies: new Map<string, CountryStringency>(),\n      topics: new Map<string, CountryTopicAttention>(),\n      notes: [],\n    };\n  }\n\n  update = (animated: boolean = false) => {\n    console.log(\"update timeline\");\n    const bbox = this.container?.node()?.getBoundingClientRect();\n    const width = bbox?.width ?? 0;\n\n    this.svg.attr(\"width\", width).attr(\"height\", this.height);\n    this.bounds.attr(\n      \"transform\",\n      `translate(${this.margin.left}, ${this.margin.top})`\n    );\n    this.listeningRect\n      .attr(\"width\", width - this.margin.left - this.margin.right)\n      .attr(\"height\", this.height - this.margin.top - this.margin.bottom);\n\n    this.hoverLabel\n      .attr(\"x\", width - this.margin.left - this.margin.right - 10)\n      .attr(\"y\", this.height - this.margin.top - this.margin.bottom - 10);\n\n    this.hoverLine.attr(\n      \"height\",\n      this.height - this.margin.top - this.margin.bottom\n    );\n\n    // data types\n    type ChangepointGraph = { date: Date; id: string };\n\n    type StringencyGraph = {\n      id: string;\n      stringency: {\n        date: Date;\n        value: number;\n        notes: string[];\n      }[];\n      changepoints: ChangepointGraph[];\n    };\n\n    type PageviewGraph = {\n      id: string;\n      traffic: Pageview[];\n    };\n\n    const stringencies: StringencyGraph[] = Array.from(\n      this.state.stringencies.entries()\n    ).map(([tag, s]) => {\n      return {\n        id: tag,\n        stringency: s.stringency.map((d) => {\n          return {\n            date: new Date(d?.Date),\n            value: Number(d.StringencyIndex),\n            notes: d.Notes,\n          };\n        }),\n        changepoints: s.changepoints.map((d) => {\n          return { date: new Date(d), id: tag };\n        }),\n      };\n    });\n\n    const pageviews: PageviewGraph[] = Array.from(\n      this.state.topics.entries()\n    ).map(([tag, t]) => {\n      return {\n        id: tag,\n        traffic: t.traffic,\n      };\n    });\n\n    this.bounds\n      .select(\".yLabelStringency\")\n      .attr(\"opacity\", stringencies.length > 0 ? 1 : 0);\n\n    this.bounds\n      .select(\".yLabelPageviews\")\n      .attr(\"opacity\", pageviews.length > 0 ? 1 : 0)\n      .attr(\n        \"transform\",\n        `translate(${\n          width - this.margin.left - this.margin.right - 10\n        },0)rotate(-90)`\n      );\n\n    const color = d3\n      .scaleOrdinal(d3.schemeCategory10)\n      .domain([...stringencies, ...pageviews].map((s) => s.id));\n\n    // compute the total x domain (stringency and pageviews combined)\n    const xExtentStringencies = [\n      d3.min(stringencies, (s) => d3.min(s.stringency, (d) => d.date)),\n      d3.max(stringencies, (s) => d3.max(s.stringency, (d) => d.date)),\n    ] as [Date, Date];\n\n    const xExtentPageviews = [\n      d3.min(pageviews, (s) => d3.min(s.traffic, (d) => d.date)),\n      d3.max(pageviews, (s) => d3.max(s.traffic, (d) => d.date)),\n    ] as [Date, Date];\n\n    const xExtent = d3.extent([\n      ...xExtentStringencies,\n      ...xExtentPageviews,\n    ]) as [Date, Date];\n\n    const xScale = d3\n      .scaleTime()\n      .range([0, width - this.margin.left - this.margin.right])\n      .domain(xExtent);\n\n    this.bounds\n      .selectAll<SVGGElement, any>(\".xAxis\")\n      .attr(\n        \"transform\",\n        `translate(0, ${this.height - this.margin.bottom - this.margin.top})`\n      )\n      .transition()\n      .duration(animated ? 100 : 0)\n      .call(d3.axisBottom(xScale))\n      .selectAll(\"text\")\n      .attr(\"transform\", \"translate(-10,0)rotate(-45)\")\n      .style(\"text-anchor\", \"end\");\n\n    // compute the total y domain (stringency and pageviews separately)\n    const yExtentStringency = [\n      d3.min(stringencies, (s) => d3.min(s.stringency, (d) => d.value)),\n      d3.max(stringencies, (s) => d3.max(s.stringency, (d) => d.value)),\n    ] as [number, number];\n\n    const yScaleStringency = d3\n      .scaleLinear<number>()\n      .range([this.height - this.margin.top - this.margin.bottom, 0])\n      .domain(yExtentStringency);\n\n    this.bounds\n      .selectAll<SVGGElement, any>(\".yAxisStringency\")\n      .transition()\n      .duration(animated ? 100 : 0)\n      .call(d3.axisLeft(yScaleStringency))\n      .selectAll(\"text\")\n      .style(\"text-anchor\", \"end\");\n\n    const yExtentPageviews = [\n      d3.min(pageviews, (s) => d3.min(s.traffic, (d) => d.views)),\n      d3.max(pageviews, (s) => d3.max(s.traffic, (d) => d.views)),\n    ] as [number, number];\n\n    const yScalePageviews = d3\n      .scaleLinear<number>()\n      .range([this.height - this.margin.top - this.margin.bottom, 0])\n      .domain(yExtentPageviews);\n\n    this.bounds\n      .selectAll<SVGGElement, any>(\".yAxisPageviews\")\n      .attr(\n        \"transform\",\n        `translate(${width - this.margin.left - this.margin.right}, 0)`\n      )\n      .transition()\n      .duration(animated ? 100 : 0)\n      .call(d3.axisRight(yScalePageviews))\n      .selectAll(\"text\")\n      .style(\"text-anchor\", \"start\");\n\n    const stringenciesProj = this.bounds\n      .selectAll<SVGGElement, StringencyGraph>(\".stringency\")\n      .data(stringencies, (s) => s.id);\n\n    stringenciesProj.exit().remove();\n    const stringenciesProjContainer = stringenciesProj\n      .enter()\n      .append(\"g\")\n      .attr(\"class\", (s) => `stringency ${s.id}`);\n\n    stringenciesProjContainer.append(\"path\").attr(\"class\", \"line\");\n    stringenciesProjContainer\n      .append(\"text\")\n      .attr(\"class\", (s) => `legend-${s.id}`)\n      .attr(\"text-anchor\", \"end\")\n      .style(\"font-size\", \"10px\")\n      .attr(\"fill\", (d) => color(d.id))\n      .attr(\"x\", width - this.margin.left - this.margin.right - 10)\n      .attr(\n        \"y\",\n        (d, i) =>\n          this.height - this.margin.top - this.margin.bottom - 35 - 15 * i\n      )\n      .text((d) => d.id);\n\n    const line = d3\n      .line<{ date: Date; value: number }>()\n      .x((d) => xScale(d.date))\n      .y((d) => yScaleStringency(d.value));\n\n    const lineID = (title: string) => {\n      return title.toLowerCase().replaceAll(\":\", \"-\");\n    };\n\n    this.bounds\n      .selectAll<SVGPathElement, StringencyGraph>(\".line\")\n      .attr(\"stroke-dasharray\", \"3, 3\")\n      .attr(\"fill\", \"none\")\n      .attr(\"id\", (d, i) => lineID(d.id))\n      .attr(\"stroke-width\", 2)\n      .attr(\"stroke-linecap\", \"round\")\n      .attr(\"d\", (d, i) => {\n        return line(d.stringency);\n      })\n      .style(\"stroke\", (d) => color(d.id));\n\n    const changepoints = stringenciesProjContainer\n      .append(\"g\")\n      .attr(\"class\", \"changepoints\")\n      .selectAll<SVGRectElement, ChangepointGraph>(\".changepoint\")\n      .data<ChangepointGraph>((d) => d.changepoints);\n\n    changepoints.exit().remove();\n    changepoints.enter().append(\"rect\").attr(\"class\", \"changepoint\");\n\n    this.bounds\n      .selectAll<SVGRectElement, ChangepointGraph>(\".changepoint\")\n      .attr(\"width\", \"5px\")\n      .attr(\"cursor\", \"pointer\")\n      .attr(\"fill\", (d) => color(d.id))\n      .attr(\"opacity\", \"0.1\")\n      .attr(\"height\", this.height - this.margin.top - this.margin.bottom)\n      .attr(\"x\", (d) => {\n        return xScale(d.date);\n      })\n      .on(\"click\", (event, d) => {\n        const current = d3.select(event.currentTarget);\n        if (\n          this.props.currentChangepoint !== undefined &&\n          !isSameDate(d.date, this.props.currentChangepoint)\n        ) {\n          // must deselect old one\n          d3.selectAll<SVGRectElement, StringencyGraph>(\".changepoint\").attr(\n            \"opacity\",\n            0.1\n          );\n        }\n        const alreadySelected = isSameDate(\n          d.date,\n          this.props.currentChangepoint\n        );\n        current\n          .classed(\"selected\", !alreadySelected)\n          .attr(\"opacity\", (d) => (alreadySelected ? 0.1 : 0.5));\n\n        this.props.selectChangepoint({\n          changepoint: alreadySelected ? undefined : d.date,\n          tag: alreadySelected\n            ? undefined\n            : this.props.activeTags.find((t) => t.title === d.id),\n        });\n      })\n      .on(\"mouseover\", (event, d) => {\n        d3.select(event.currentTarget).attr(\"opacity\", 0.5);\n      })\n      .on(\"mouseout\", (event, d) => {\n        d3.select<SVGRectElement, any>(event.currentTarget).attr(\n          \"opacity\",\n          (d) => (d.date === this.props.currentChangepoint ? 0.5 : 0.1)\n        );\n      });\n\n    d3.selectAll<SVGPathElement, StringencyGraph>(\".line\").each((d, i) => {\n      var totalLength =\n        d3\n          .select<SVGPathElement, StringencyGraph>(\"#\" + lineID(d.id))\n          ?.node()\n          ?.getTotalLength() ?? width;\n\n      d3.selectAll(\"#\" + lineID(d.id))\n        .attr(\"stroke-dasharray\", totalLength + \" \" + totalLength)\n        .attr(\"stroke-dashoffset\", totalLength)\n        .transition()\n        .duration(animated ? 1000 : 0)\n        .delay(animated ? 100 * (i + 0) : 0)\n        .ease(d3.easeQuad)\n        .attr(\"stroke-dashoffset\", 0);\n    });\n\n    this.listeningRect\n      .on(\"click\", (event, d) => {\n        // toggle hovering to be able to read about restrictions\n        this.hoverEnabled = !this.hoverEnabled;\n      })\n      .on(\"mousemove\", (event, d) => {\n        if (!this.hoverEnabled) return;\n        const mouseX = d3.pointer(event)[0];\n        const hoveredDate: Date = xScale.invert(mouseX);\n        this.hoverLabel.text(d3.timeFormat(\"%B %d, %Y\")(hoveredDate));\n        this.hoverLine.attr(\"x\", xScale(hoveredDate));\n\n        // only show detailed stringency events if one is plotted\n        if (stringencies.length !== 1) {\n          this.setState({\n            notes: [],\n          });\n          return;\n        }\n\n        const dist = (d: { date: Date }): number =>\n          Math.abs((d.date?.getTime() ?? 0) - hoveredDate.getTime());\n        const firstStringency: StringencyGraph = stringencies[0];\n        const stringencyWithNotes = firstStringency.stringency.filter(\n          (s) => s.notes.length > 0\n        );\n        const closestIndexWithNotes: number | undefined = d3.leastIndex(\n          stringencyWithNotes,\n          (a, b) => dist(a) - dist(b)\n        );\n        if (closestIndexWithNotes !== undefined) {\n          const closestDataPoint = stringencyWithNotes[closestIndexWithNotes];\n          this.setState({\n            notes: [\n              ...new Set(\n                closestDataPoint?.notes.map((n) => {\n                  const stripped = n.replace(\n                    /(\\(?\\s*(Sources?:\\s*)?(https?:\\/\\/(www\\.)?[-a-zA-Z0-9@:%._\\\\+~#=]{1,256}\\.[a-zA-Z0-9()]{1,6}\\b([-a-zA-Z0-9()@:%_\\\\+.~#?&//=]*)\\s*)+\\)?)/gim,\n                    \" [...] \"\n                  );\n                  return stripped;\n                }) ?? []\n              ),\n            ],\n          });\n        }\n      });\n  };\n\n  addTimeline = () => {\n    this.container = d3.select<HTMLDivElement, any>(\"#timeline-container\");\n    this.svg = this.container.append(\"svg\").attr(\"x\", 0).attr(\"y\", 0);\n    this.bounds = this.svg.append(\"g\");\n\n    this.bounds.append(\"g\").attr(\"class\", \"xAxis\");\n\n    this.bounds.append(\"g\").attr(\"class\", \"yAxisStringency\");\n    this.bounds.append(\"g\").attr(\"class\", \"yAxisPageviews\");\n\n    this.bounds\n      .append(\"text\")\n      .attr(\"class\", \"yLabelStringency\")\n      .attr(\"text-anchor\", \"end\")\n      .attr(\"transform\", \"translate(15,0)rotate(-90)\")\n      .text(\"stringency index\");\n\n    this.bounds\n      .append(\"text\")\n      .attr(\"class\", \"yLabelPageviews\")\n      .attr(\"text-anchor\", \"end\")\n      .text(\"pageviews\");\n\n    this.listeningRect = this.bounds\n      .append(\"rect\")\n      .attr(\"class\", \"listening-rect\")\n      .attr(\"fill\", \"transparent\");\n\n    this.hoverLine = this.bounds\n      .append(\"g\")\n      .append(\"rect\")\n      .attr(\"class\", \"hoverline\")\n      .attr(\"stroke-width\", \"1px\")\n      .attr(\"width\", \".5px\");\n\n    this.hoverLabel = this.bounds.append(\"svg:text\");\n\n    this.hoverLabel\n      .text(\"\")\n      .style(\"text-anchor\", \"end\")\n      .style(\"fill\", \"black\")\n      .style(\"font-size\", 15);\n\n    const resize = () => {\n      this.update();\n    };\n    window.addEventListener(\"resize\", resize);\n  };\n\n  loadData<D>(tag: Tag): Promise<D> {\n    return new Promise<D>((resolve, reject) => {\n      this.props.incrementLoading();\n      d3.json<D>(tag.url)\n        .then((data) => {\n          if (data === undefined) return reject();\n          resolve(data);\n        })\n        .finally(() => this.props.decrementLoading());\n    });\n  }\n\n  componentDidUpdate(prevProps: TimelineProps, prevState: TimelineState) {\n    if (this.props.activeTags !== prevProps.activeTags) {\n      console.log(\"tags changed\");\n      const removeStringencies = Array.from(\n        this.state.stringencies.keys()\n      ).filter((s) => !this.props.activeTags.map((t) => t.title).includes(s));\n\n      const removeTopics = Array.from(this.state.topics.keys()).filter(\n        (s) => !this.props.activeTags.map((t) => t.title).includes(s)\n      );\n\n      if (removeStringencies.length + removeTopics.length > 0) {\n        this.setState((state) => {\n          removeStringencies.forEach((t) => state.stringencies.delete(t));\n          removeTopics.forEach((t) => state.topics.delete(t));\n          return state;\n        });\n        this.update(true);\n      }\n\n      for (let tag of this.props.activeTags) {\n        switch (tag.typ) {\n          case TagType.CountryStringency:\n            if (!(tag.title in this.state.topics)) {\n              // load the stringency\n              this.loadData<CountryStringency>(tag).then((data) => {\n                this.setState((state) => {\n                  state.stringencies.set(tag.title, data);\n                  return state;\n                });\n                this.update(true);\n              });\n            }\n            break;\n          case TagType.CountryTotal:\n            if (!(tag.title in this.state.topics)) {\n              // load the total traffic\n              this.loadData<CountryTopicAttention>(tag).then((data) => {\n                this.setState((state) => {\n                  state.topics.set(tag.title, data);\n                  return state;\n                });\n                this.update();\n              });\n            }\n            break;\n          case TagType.CountryTopicAttention:\n            if (!(tag.title in this.state.topics)) {\n              // load the topic attention\n              // todo\n              this.update();\n            }\n            break;\n          default:\n            break;\n        }\n      }\n    }\n  }\n\n  componentDidMount() {\n    this.addTimeline();\n    this.update(true);\n  }\n\n  render() {\n    return (\n      <div className=\"Timeline\">\n        <div className=\"\" id=\"timeline-container\"></div>\n        <div className=\"notes h-20 px-2 overflow-y-scroll text-gray-500 text-xs\">\n          {this.state.notes}\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default connector(Timeline);\n","import React from \"react\";\nimport { Route, Link } from \"react-router-dom\";\nimport WorldMap from \"./Map\";\nimport TopicBarPlot from \"./TopicBarPlot\";\nimport Timeline from \"./Timeline\";\nimport { connect, ConnectedProps } from \"react-redux\";\nimport { TagType, Tag } from \"./store/reducers/tags\";\nimport { Action } from \"./store/actions\";\nimport { RootState } from \"./store\";\nimport LANGUAGE_COUNTRIES from \"./data/languages_countries.json\";\nimport \"./App.sass\";\n\nconst mapState = (state: RootState) => ({\n  activeTags: state.tags.activeTags,\n});\n\nconst mapDispatch = {\n  addTag: (tag: Tag) => ({\n    type: Action.AddTag,\n    payload: {\n      tag,\n    },\n  }),\n  removeTag: (tag: Tag) => ({\n    type: Action.RemoveTag,\n    payload: {\n      tag,\n    },\n  }),\n};\n\nconst connector = connect(mapState, mapDispatch);\ntype PropsFromRedux = ConnectedProps<typeof connector>;\n\ntype MainState = {\n  availableTags: Tag[];\n  searchText: string;\n};\n\ninterface MainProps extends PropsFromRedux {}\n\nconst tagColor = (typ: TagType): string => {\n  let tagColor = \"bg-red-200 text-red-700\";\n  switch (typ) {\n    case TagType.CountryTotal:\n      tagColor = \"bg-gray-200 text-gray-700\";\n      break;\n    case TagType.CountryTopicAttention:\n      tagColor = \"bg-blue-200 text-blue-700\";\n      break;\n    default:\n      break;\n  }\n  return tagColor;\n};\n\nclass Main extends React.Component<MainProps, MainState> {\n  constructor(props: MainProps) {\n    super(props);\n    const availableTags: Tag[] = [];\n    const topics = [\n      \"Medicine\",\n      \"Sports\",\n      \"Vaccination\",\n      \"Television\",\n      \"Do-it-yourself\",\n    ];\n\n    const map = new Map();\n    LANGUAGE_COUNTRIES.forEach((lc) => {\n      let title = `${lc.country.replaceAll(\" \", \"-\")}:Stringency`;\n      if (!map.has(title)) {\n        availableTags.push({\n          typ: TagType.CountryStringency,\n          country: lc.country,\n          lang: lc.group,\n          iso3: lc.iso3,\n          url: `data/${lc.group}/${lc.country}/stringency_changepoints.json`,\n          title,\n          // id: `${lc.country.replaceAll(\" \", \"-\")}-stringency`,\n        });\n        map.set(title, true);\n      }\n      title = `${lc.country.replaceAll(\" \", \"-\")}:Total`;\n      if (!map.has(title)) {\n        availableTags.push({\n          typ: TagType.CountryTotal,\n          country: lc.country,\n          lang: lc.group,\n          iso3: lc.iso3,\n          url: `data/${lc.group}/${lc.country}/total.json`,\n          title,\n        });\n        map.set(title, true);\n      }\n      topics.forEach((topic) => {\n        title = `${lc.country.replaceAll(\" \", \"-\")}:Topic:${topic}`;\n        if (!map.has(title)) {\n          availableTags.push({\n            typ: TagType.CountryTopicAttention,\n            country: lc.country,\n            lang: lc.group,\n            iso3: lc.iso3,\n            url: `data/${lc.group}/${lc.country}/topic_${topic}.json`,\n            title,\n          });\n          map.set(title, true);\n        }\n      });\n    });\n    this.state = {\n      availableTags,\n      searchText: \"\",\n    };\n  }\n\n  handleUpdateSearchText = (event: React.ChangeEvent<HTMLInputElement>) => {\n    this.setState({ searchText: event.target.value });\n  };\n\n  componentDidMount() {\n    this.state.availableTags\n      .filter((t) => t.title === \"Germany:Stringency\")\n      .filter((t) => !this.props.activeTags.some((tt) => t.title === tt.title))\n      .forEach((t) => {\n        console.log(\"adding\", t);\n        this.props.addTag(t);\n      });\n  }\n\n  render() {\n    const activeTags = this.props.activeTags.map((tag) => {\n      return (\n        <div\n          key={tag.title}\n          onClick={() => this.props.removeTag(tag)}\n          className={\n            \"text-xs inline-flex opacity-75 hover:opacity-100 cursor-pointer items-center font-bold leading-sm uppercase px-3 py-1 m-1 rounded-full \" +\n            tagColor(tag.typ)\n          }\n        >\n          <svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            className=\"h-3 w-3\"\n            fill=\"none\"\n            viewBox=\"0 0 24 24\"\n            stroke=\"currentColor\"\n          >\n            <path\n              strokeLinecap=\"round\"\n              strokeLinejoin=\"round\"\n              strokeWidth=\"2\"\n              d=\"M6 18L18 6M6 6l12 12\"\n            />\n          </svg>\n          {tag.title}\n        </div>\n      );\n    });\n\n    const longestPrefix = (words: string[]): number => {\n      // check border cases size 1 array and empty first word)\n\n      if (!words[0]) return 0;\n      if (words.length === 1) return words[0].length;\n\n      let i = 0;\n      let done = false;\n      // while (words[0][i] && words.every((w) => w[i] === words[0][i])) i++;\n      // avoid unsafe use of variable i by using a for loop:\n      while (words[0][i]) {\n        for (let w of words) {\n          if (w[i] !== words[0][i]) {\n            done = true;\n            break;\n          }\n        }\n        if (done) break;\n        i++;\n      }\n\n      return words[0].substr(0, i).length;\n    };\n\n    const searchMatchScorer = (query: string[], tag: string[]): number => {\n      let totalScore = 0;\n      while (query.length > 0 && tag.length > 0) {\n        let maxScore = 0;\n        let maxQi = 0;\n        let maxTi = 0;\n        for (let ti in tag) {\n          for (let qi in query) {\n            let score = longestPrefix([query[qi], tag[ti]]);\n            if (score >= maxScore) {\n              maxScore = score;\n              maxQi = Number(qi);\n              maxTi = Number(ti);\n            }\n          }\n        }\n        totalScore += maxScore;\n        query.splice(maxQi, 1);\n        tag.splice(maxTi, 1);\n      }\n      return totalScore;\n    };\n\n    const searchPrefixes = this.state.searchText\n      .toLowerCase()\n      .replaceAll(\":\", \" \")\n      .split(\" \")\n      .filter((s) => s.length > 0);\n    // console.log(searchPrefixes);\n\n    const availableTags: [Tag, number][] = this.state.availableTags\n      .filter((t) => {\n        return !this.props.activeTags.map((tt) => tt.title).includes(t.title);\n      })\n      .map((t) => {\n        // const scored = [\n        //   t,\n        //   searchMatchScorer(\n        //     [...searchPrefixes],\n        //     t.title.toLowerCase().split(\":\")\n        //   ),\n        // ];\n        // console.log(scored);\n        return [\n          t,\n          searchMatchScorer(\n            [...searchPrefixes],\n            t.title.toLowerCase().split(\":\")\n          ),\n        ];\n      });\n\n    const scoredAvailableTags = availableTags\n      .sort(([a, scoreA], [b, scoreB]) => {\n        return scoreB - scoreA;\n      })\n      .slice(0, 8)\n      .map(([tag, _]) => {\n        return (\n          <div\n            key={tag.title}\n            onClick={() => this.props.addTag(tag)}\n            className={\n              \"text-xs inline-flex opacity-75 hover:opacity-100 cursor-pointer items-center font-normal leading-sm max-w-full break-all uppercase pl-1 pr-2 py-1 m-1 rounded-full \" +\n              tagColor(tag.typ)\n            }\n          >\n            <svg\n              xmlns=\"http://www.w3.org/2000/svg\"\n              className=\"h-3 w-3\"\n              fill=\"none\"\n              viewBox=\"0 0 24 24\"\n              stroke=\"currentColor\"\n            >\n              <path\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n                strokeWidth=\"2\"\n                d=\"M12 6v6m0 0v6m0-6h6m-6 0H6\"\n              />\n            </svg>\n            {tag.title}\n          </div>\n        );\n      });\n\n    const tabStyle = \"font-semibold bg-white inline-block py-1 px-2 \";\n    const selectedTabStyle =\n      tabStyle +\n      \"cursor-pointer text-gray-800 border-l border-t border-r rounded-t\";\n    // const unselectedTabStyle =\n    //   tabStyle + \"cursor-pointer text-gray-300 hover:text-gray-800\";\n    const disabledTabStyle =\n      tabStyle + \" text-gray-200 cursor-default hover:text-gray-200\";\n\n    return (\n      <div className=\"Main\">\n        <div className=\"flex\">\n          <div className=\"tags\">{activeTags}</div>\n        </div>\n        <div className=\"flex\">\n          <div className=\"w-3/4 inline-block\">\n            <Timeline />\n          </div>\n          <div className=\"w-1/4 inline-block px-2 py-1\">\n            <input\n              className=\"focus:border-light-blue-500 focus:ring-1 focus:ring-light-blue-500 focus:outline-none w-full text-sm text-black placeholder-gray-500 border border-gray-200 rounded-md py-2 pl-1\"\n              type=\"text\"\n              value={this.state.searchText}\n              onChange={this.handleUpdateSearchText}\n              aria-label=\"Search\"\n              placeholder=\"Search\"\n            />\n            <div>\n              <div className=\"tags overflow-y-scroll\">\n                {scoredAvailableTags}\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <ul className=\"flex border-b\">\n          <li className=\"-mb-px ml-2\">\n            <Link className={selectedTabStyle} to=\"/\">\n              Attention Shift\n            </Link>\n          </li>\n\n          <li className=\"ml-2\">\n            <Link\n              onClick={(event) => event.preventDefault()}\n              className={disabledTabStyle}\n              to=\"/map\"\n            >\n              Map\n            </Link>\n          </li>\n        </ul>\n        <div className=\"tabContent mb-5\">\n          <Route exact path=\"/map\" component={WorldMap} />\n          <Route exact path=\"/\" component={TopicBarPlot} />\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default connector(Main);\n","import React from \"react\";\n\ntype AboutProps = {};\ntype AboutState = {};\n\nexport default class About extends React.Component<AboutProps, AboutState> {\n  state: AboutState = {};\n\n  render() {\n    return (\n      <div className=\"About\">\n        This is an about page\n      </div>\n    )\n  }\n}\n","export default __webpack_public_path__ + \"static/media/covid19_2.f14dc517.jpg\";","export default __webpack_public_path__ + \"static/media/VU_2.97ce354c.png\";","import React from \"react\";\nimport { HashRouter as Router, Route, Link } from \"react-router-dom\";\nimport Main from \"./Main\";\nimport About from \"./About\";\nimport covidLogo from \"./images/covid19_2.jpg\";\nimport vuLogo from \"./images/VU_2.png\";\nimport \"./App.sass\";\nimport { connect, ConnectedProps } from \"react-redux\";\nimport { RootState } from \"./store\";\n\nconst mapState = (state: RootState) => ({\n  loadingCount: state.loading?.loadingCount,\n});\n\nconst mapDispatch = {};\n\nconst connector = connect(mapState, mapDispatch);\ntype PropsFromRedux = ConnectedProps<typeof connector>;\n\ninterface AppProps extends PropsFromRedux {}\ntype AppState = {};\n\nclass App extends React.Component<AppProps, AppState> {\n  constructor(props: AppProps) {\n    super(props);\n    this.state = {\n      loading: true,\n    };\n  }\n\n  render() {\n    return (\n      <div className=\"App\">\n        <Router>\n          <nav className=\"flex items-center justify-between flex-wrap bg-blue-300 p-2\">\n            <Link\n              to=\"/\"\n              className=\"flex items-center flex-shrink-1 text-white mr-4\"\n            >\n              <img\n                className=\"rounded-full max-h-6 p-0 mr-2\"\n                alt=\"Covid-19 Logo\"\n                src={covidLogo}\n              />\n              <span className=\"font-semibold text-l tracking-tight text-black\">\n                COVID-19 Wikipedia Attention\n              </span>\n            </Link>\n            <div className=\"block flex-grow flex items-center place-items-start w-auto\">\n              <div className=\"text-sm flex-grow\">\n                {/* <Link\n                  className=\"block inline-block mt-0 text-teal-200 hover:text-white mr-4\"\n                  to=\"/about\"\n                >\n                  About\n                </Link> */}\n              </div>\n              <div className=\"mr-3\">\n                {this.props.loadingCount > 0 && (\n                  <div className=\"block animate-spin h-4 w-4 rounded-full border-b-2 border-gray-900\"></div>\n                )}\n              </div>\n              <div className=\"mr-1\">\n                <a href=\"https://vu.nl\">\n                  <img\n                    className=\"inline-block rounded-full max-h-6 p-0 bg-white px-2\"\n                    alt=\"VU University Logo\"\n                    src={vuLogo}\n                  />\n                </a>\n              </div>\n              <div>\n                <a\n                  href=\"https://github.com/romnn/lsde2021\"\n                  className=\"inline-block text-sm px-4 py-2 leading-none border rounded text-black border-transparent hover:border-white\"\n                >\n                  GitHub\n                </a>\n              </div>\n            </div>\n          </nav>\n\n          <Route exact path=\"/\" component={Main} />\n          <Route exact path=\"/about\" component={About} />\n        </Router>\n      </div>\n    );\n  }\n}\n\nexport default connector(App);\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import { Tag } from \"./tags\";\nimport { Action } from \"../actions\";\nimport { AnyAction } from \"redux\";\n\ntype ChangepointState = {\n  readonly changepoint: Date | undefined;\n  readonly tag: Tag | undefined;\n};\n\nconst initialState: ChangepointState = {\n  changepoint: undefined,\n  tag: undefined,\n};\n\nexport type { ChangepointState };\n\nexport default function changepointReducer(\n  state = initialState,\n  action: AnyAction\n) {\n  switch (action.type) {\n    case Action.SelectChangepoint: {\n      const { changepoint, tag } = action.payload;\n      return {\n        ...state,\n        changepoint,\n        tag,\n      };\n    }\n\n    default:\n      return state;\n  }\n}\n","import { Action } from \"../actions\";\nimport { AnyAction } from \"redux\";\n\ntype LoadingState = {\n  readonly loadingCount: number;\n};\n\nconst initialState: LoadingState = {\n  loadingCount: 0,\n};\n\nexport type { LoadingState };\n\nexport default function loadingReducer(\n  state = initialState,\n  action: AnyAction\n) {\n  switch (action.type) {\n    case Action.IncrementLoading: {\n      return {\n        ...state,\n        loadingCount: state.loadingCount + 1,\n      };\n    }\n    case Action.DecrementLoading: {\n      return {\n        ...state,\n        loadingCount: state.loadingCount - 1,\n      };\n    }\n\n    default:\n      return state;\n  }\n}\n","import { combineReducers } from \"redux\";\nimport tags from \"./tags\";\nimport changepoints from \"./changepoints\";\nimport loading from \"./loading\";\n\nexport default combineReducers({ tags, changepoints, loading });\n","import { createStore } from \"redux\";\nimport rootReducer from \"./reducers\";\n\nconst store = createStore(rootReducer);\n\nexport type RootState = ReturnType<typeof store.getState>\n\nexport default store;\n// export { initialState, Action };\n// export type {  RootState };\n// import { createSlice, configureStore } from \"@reduxjs/toolkit\";\n\n// enum TagType {\n//   CountryStringency,\n//   CountryTopicAttention,\n//   CountryTotal,\n// }\n\n// type Tag = {\n//   typ: TagType;\n//   title: string;\n// };\n\n// type StoreState = {\n//   loading: number;\n//   activeTags: Tag[];\n// };\n\n// export { TagType };\n// export type { Tag };\n\n// // export const addTodo = (tag: Tag) => ({\n// //   type: Action.AddTODO,\n// //   payload: {\n// //     id: 0,\n// //     tag,\n// //   },\n// // });\n\n// const counterSlice = createSlice({\n//   name: \"counter\",\n//   initialState: {\n//     loading: 0,\n//     activeTagTitles: [],\n//   },\n//   reducers: {\n//     incrementLoading: (state) => {\n//       state.loading += 1;\n//     },\n//     decrementedLoading: (state) => {\n//       state.loading = Math.max(0, state.loading - 1);\n//     },\n//     // addTag: (state, tag) => {\n//     //   state.activeTagTitles.push(tag.title);\n//     // },\n//     // removeTag: (state, title) => {\n//     //   state.activeTagTitles = state.activeTagTitles.filter((t) => {\n//     //     return title !== t;\n//     //   });\n//     // },\n//   },\n// });\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport reportWebVitals from \"./reportWebVitals\";\nimport { Provider } from \"react-redux\";\nimport store from \"./store/index\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <App />\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}